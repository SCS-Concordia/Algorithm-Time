var Rx = require("rx");

/**
 * The generator function for IoC contianers.
 *
 * This function takes a map of service factory functions that
 * should return Observables containing the service if one is
 * present. All factory functions should take the IoC container
 * as it's only argument and return an Observable.
 *
 * @param Object services The services map
 * @return Function The IoC container as a function
 */
module.exports = function(services) {
    var container = null;
    container = function(service) {
        if (services[service]) {
            return services[service](container);
        } else {
            return Rx.Observable.fromArray([]);
        }
    };
    return container;
};
