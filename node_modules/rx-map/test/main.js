var Rx    = require("rx");
var RxMap = require("../src/index");

var map = new RxMap();

map.subscribe(function(data) {
    console.log("map updated: " + data.key + " => " + data.value);
});

map.set("morning", "coffee");
map.set("afternoon", "espresso");
map.set("night", "tea");

var mocha = Rx.Observable.returnValue("mocha", Rx.Scheduler.timeout);
var cap   = Rx.Observable.returnValue("cappuccino", Rx.Scheduler.timeout);
map.setLatest("tomorrow", mocha);
map.setLatest("tomorrow", cap);
map.get("tomorrow").subscribe(console.log);

map.get("morning").subscribe(console.log);

map.getOrElse("yesterday", function() {
    return Rx.Observable.returnValue("nothing");
}).subscribe(console.log);

map.putIfAbsent("yesterday", function() {
    return Rx.Observable.returnValue("beer");
}).subscribe(console.log);
